<!DOCTYPE html>
<html lang="en">
<head>
    
    <meta charset="utf-8">
    <title>Tutorial: Getting Started - Backendjs Documentation</title>
    
    <meta name="description" content="A Node.js library to create Web backends with minimal dependencies." />
    
    
    
    <script src="scripts/prettify/prettify.js"></script>
    <script src="scripts/prettify/lang-css.js"></script>
    <!--[if lt IE 9]>
      <script src="//html5shiv.googlecode.com/svn/trunk/html5.js"></script>
    <![endif]-->
    <link type="text/css" rel="stylesheet" href="styles/prettify.css">
    <link type="text/css" rel="stylesheet" href="styles/jsdoc.css">
    <script src="scripts/nav.js" defer></script>
    
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
</head>
<body>

<input type="checkbox" id="nav-trigger" class="nav-trigger" />
<label for="nav-trigger" class="navicon-button x">
  <div class="navicon"></div>
</label>

<label for="nav-trigger" class="overlay"></label>

<nav >
    
    <input type="text" id="nav-search" placeholder="Search" />
    
    
    <h2><a href="index.html">Home</a></h2><h3>Tutorials</h3><ul><li><a href="tutorial-01-start.html">Getting Started</a><ul class='typedefs'></ul></li><li><a href="tutorial-02-app.html">Applications</a><ul class='typedefs'></ul></li><li><a href="tutorial-03-reference.html">Reference</a><ul class='typedefs'></ul></li><li><a href="tutorial-04-bkjs.html">bkjs tool</a><ul class='typedefs'></ul></li><li><a href="tutorial-05-methods.html">Module lifecycle</a><ul class='typedefs'></ul></li><li><a href="tutorial-99-config.html">Config parameters</a><ul class='typedefs'></ul></li></ul><h3>Modules</h3><ul><li><a href="module-api.html">api</a><ul class='methods'><li data-type='method' style='display: none;'><a href="module-api.html#.checkProxy">checkProxy</a></li><li data-type='method' style='display: none;'><a href="module-api.html#.checkRateLimits">checkRateLimits</a></li><li data-type='method' style='display: none;'><a href="module-api.html#.checkRedirectPlaceholders">checkRedirectPlaceholders</a></li><li data-type='method' style='display: none;'><a href="module-api.html#.cleanupHeaders">cleanupHeaders</a></li><li data-type='method' style='display: none;'><a href="module-api.html#.cleanupResult">cleanupResult</a></li><li data-type='method' style='display: none;'><a href="module-api.html#.createServer">createServer</a></li><li data-type='method' style='display: none;'><a href="module-api.html#.getResultPage">getResultPage</a></li><li data-type='method' style='display: none;'><a href="module-api.html#.getTokenSecret">getTokenSecret</a></li><li data-type='method' style='display: none;'><a href="module-api.html#.handleBody">handleBody</a></li><li data-type='method' style='display: none;'><a href="module-api.html#.handleCleanup">handleCleanup</a></li><li data-type='method' style='display: none;'><a href="module-api.html#.handleMetrics">handleMetrics</a></li><li data-type='method' style='display: none;'><a href="module-api.html#.handleMultipart">handleMultipart</a></li><li data-type='method' style='display: none;'><a href="module-api.html#.init">init</a></li><li data-type='method' style='display: none;'><a href="module-api.html#.prepareOptions">prepareOptions</a></li><li data-type='method' style='display: none;'><a href="module-api.html#.prepareRequest">prepareRequest</a></li><li data-type='method' style='display: none;'><a href="module-api.html#.registerPreHeaders">registerPreHeaders</a></li><li data-type='method' style='display: none;'><a href="module-api.html#.registerRateLimits">registerRateLimits</a></li><li data-type='method' style='display: none;'><a href="module-api.html#.sendFile">sendFile</a></li><li data-type='method' style='display: none;'><a href="module-api.html#.sendFormatted">sendFormatted</a></li><li data-type='method' style='display: none;'><a href="module-api.html#.sendJSON">sendJSON</a></li><li data-type='method' style='display: none;'><a href="module-api.html#.sendReply">sendReply</a></li><li data-type='method' style='display: none;'><a href="module-api.html#.sendStatus">sendStatus</a></li><li data-type='method' style='display: none;'><a href="module-api.html#.shutdown">shutdown</a></li><li data-type='method' style='display: none;'><a href="module-api.html#.startMetrics">startMetrics</a></li><li data-type='method' style='display: none;'><a href="module-api.html#.toParams">toParams</a></li></ul><ul class='typedefs'></ul></li><li><a href="module-app.html">app</a><ul class='methods'><li data-type='method' style='display: none;'><a href="module-app.html#.addModule">addModule</a></li><li data-type='method' style='display: none;'><a href="module-app.html#.checkConfig">checkConfig</a></li><li data-type='method' style='display: none;'><a href="module-app.html#.createRepl">createRepl</a></li><li data-type='method' style='display: none;'><a href="module-app.html#.describeArgs">describeArgs</a></li><li data-type='method' style='display: none;'><a href="module-app.html#.init">init</a></li><li data-type='method' style='display: none;'><a href="module-app.html#.isOk">isOk</a></li><li data-type='method' style='display: none;'><a href="module-app.html#.killBackend">killBackend</a></li><li data-type='method' style='display: none;'><a href="module-app.html#.loadModules">loadModules</a></li><li data-type='method' style='display: none;'><a href="module-app.html#.loadPackages">loadPackages</a></li><li data-type='method' style='display: none;'><a href="module-app.html#.mime">mime</a></li><li data-type='method' style='display: none;'><a href="module-app.html#.parseArgs">parseArgs</a></li><li data-type='method' style='display: none;'><a href="module-app.html#.parseConfig">parseConfig</a></li><li data-type='method' style='display: none;'><a href="module-app.html#.processArg">processArg</a></li><li data-type='method' style='display: none;'><a href="module-app.html#.processArgs">processArgs</a></li><li data-type='method' style='display: none;'><a href="module-app.html#.processEnvArgs">processEnvArgs</a></li><li data-type='method' style='display: none;'><a href="module-app.html#.processName">processName</a></li><li data-type='method' style='display: none;'><a href="module-app.html#.runMethods">runMethods</a></li><li data-type='method' style='display: none;'><a href="module-app.html#.setHome">setHome</a></li><li data-type='method' style='display: none;'><a href="module-app.html#.setHost">setHost</a></li><li data-type='method' style='display: none;'><a href="module-app.html#.setLogInspect">setLogInspect</a></li><li data-type='method' style='display: none;'><a href="module-app.html#.shutdown">shutdown</a></li><li data-type='method' style='display: none;'><a href="module-app.html#.sortModules">sortModules</a></li><li data-type='method' style='display: none;'><a href="module-app.html#.start">start</a></li><li data-type='method' style='display: none;'><a href="module-app.html#.startRepl">startRepl</a></li><li data-type='method' style='display: none;'><a href="module-app.html#.watchTmp">watchTmp</a></li></ul><ul class='typedefs'><li data-type='typedef' style='display: none;'><a href="module-app.html#~ConfigOptions">ConfigOptions</a></li></ul></li><li><a href="module-aws.html">aws</a><ul class='methods'><li data-type='method' style='display: none;'><a href="module-aws.html#.aws.cwGetMetricData">aws.cwGetMetricData</a></li><li data-type='method' style='display: none;'><a href="module-aws.html#.aws.cwListMetrics">aws.cwListMetrics</a></li><li data-type='method' style='display: none;'><a href="module-aws.html#.aws.cwPutLogEvents">aws.cwPutLogEvents</a></li><li data-type='method' style='display: none;'><a href="module-aws.html#.aws.cwPutMetricAlarm">aws.cwPutMetricAlarm</a></li><li data-type='method' style='display: none;'><a href="module-aws.html#.aws.cwPutMetricData">aws.cwPutMetricData</a></li><li data-type='method' style='display: none;'><a href="module-aws.html#.aws.cwlFilterLogEvents">aws.cwlFilterLogEvents</a></li><li data-type='method' style='display: none;'><a href="module-aws.html#.aws.ddbBatchGetItem">aws.ddbBatchGetItem</a></li><li data-type='method' style='display: none;'><a href="module-aws.html#.aws.ddbBatchWriteItem">aws.ddbBatchWriteItem</a></li><li data-type='method' style='display: none;'><a href="module-aws.html#.aws.ddbCreateTable">aws.ddbCreateTable</a></li><li data-type='method' style='display: none;'><a href="module-aws.html#.aws.ddbDeleteItem">aws.ddbDeleteItem</a></li><li data-type='method' style='display: none;'><a href="module-aws.html#.aws.ddbDeleteTable">aws.ddbDeleteTable</a></li><li data-type='method' style='display: none;'><a href="module-aws.html#.aws.ddbDescribeTable">aws.ddbDescribeTable</a></li><li data-type='method' style='display: none;'><a href="module-aws.html#.aws.ddbGetItem">aws.ddbGetItem</a></li><li data-type='method' style='display: none;'><a href="module-aws.html#.aws.ddbPutItem">aws.ddbPutItem</a></li><li data-type='method' style='display: none;'><a href="module-aws.html#.aws.ddbQueryTable">aws.ddbQueryTable</a></li><li data-type='method' style='display: none;'><a href="module-aws.html#.aws.ddbScanTable">aws.ddbScanTable</a></li><li data-type='method' style='display: none;'><a href="module-aws.html#.aws.ddbTransactWriteItems">aws.ddbTransactWriteItems</a></li><li data-type='method' style='display: none;'><a href="module-aws.html#.aws.ddbUpdateItem">aws.ddbUpdateItem</a></li><li data-type='method' style='display: none;'><a href="module-aws.html#.aws.ddbUpdateTable">aws.ddbUpdateTable</a></li><li data-type='method' style='display: none;'><a href="module-aws.html#.aws.ddbUpdateTimeToLive">aws.ddbUpdateTimeToLive</a></li><li data-type='method' style='display: none;'><a href="module-aws.html#.aws.ddbWaitForTable">aws.ddbWaitForTable</a></li><li data-type='method' style='display: none;'><a href="module-aws.html#.aws.queryCW">aws.queryCW</a></li><li data-type='method' style='display: none;'><a href="module-aws.html#.aws.queryCWL">aws.queryCWL</a></li><li data-type='method' style='display: none;'><a href="module-aws.html#.aws.querySQS">aws.querySQS</a></li><li data-type='method' style='display: none;'><a href="module-aws.html#.aws.sqsReceiveMessage">aws.sqsReceiveMessage</a></li><li data-type='method' style='display: none;'><a href="module-aws.html#.aws.sqsSendMessage">aws.sqsSendMessage</a></li></ul><ul class='typedefs'></ul></li><li><a href="module-cache.html">cache</a><ul class='typedefs'></ul></li><li><a href="module-db.html">db</a><ul class='methods'><li data-type='method' style='display: none;'><a href="module-db.html#.aadd">aadd</a></li><li data-type='method' style='display: none;'><a href="module-db.html#.abatch">abatch</a></li><li data-type='method' style='display: none;'><a href="module-db.html#.abulk">abulk</a></li><li data-type='method' style='display: none;'><a href="module-db.html#.acopy">acopy</a></li><li data-type='method' style='display: none;'><a href="module-db.html#.acreate">acreate</a></li><li data-type='method' style='display: none;'><a href="module-db.html#.add">add</a></li><li data-type='method' style='display: none;'><a href="module-db.html#.adel">adel</a></li><li data-type='method' style='display: none;'><a href="module-db.html#.adelAll">adelAll</a></li><li data-type='method' style='display: none;'><a href="module-db.html#.adrop">adrop</a></li><li data-type='method' style='display: none;'><a href="module-db.html#.aget">aget</a></li><li data-type='method' style='display: none;'><a href="module-db.html#.aincr">aincr</a></li><li data-type='method' style='display: none;'><a href="module-db.html#.ajoin">ajoin</a></li><li data-type='method' style='display: none;'><a href="module-db.html#.alist">alist</a></li><li data-type='method' style='display: none;'><a href="module-db.html#.applyPoolOptions">applyPoolOptions</a></li><li data-type='method' style='display: none;'><a href="module-db.html#.aput">aput</a></li><li data-type='method' style='display: none;'><a href="module-db.html#.aquery">aquery</a></li><li data-type='method' style='display: none;'><a href="module-db.html#.ascan">ascan</a></li><li data-type='method' style='display: none;'><a href="module-db.html#.asearch">asearch</a></li><li data-type='method' style='display: none;'><a href="module-db.html#.aselect">aselect</a></li><li data-type='method' style='display: none;'><a href="module-db.html#.asql">asql</a></li><li data-type='method' style='display: none;'><a href="module-db.html#.atransaction">atransaction</a></li><li data-type='method' style='display: none;'><a href="module-db.html#.aupdate">aupdate</a></li><li data-type='method' style='display: none;'><a href="module-db.html#.aupdateAll">aupdateAll</a></li><li data-type='method' style='display: none;'><a href="module-db.html#.aupgrade">aupgrade</a></li><li data-type='method' style='display: none;'><a href="module-db.html#.batch">batch</a></li><li data-type='method' style='display: none;'><a href="module-db.html#.bulk">bulk</a></li><li data-type='method' style='display: none;'><a href="module-db.html#.cacheColumns">cacheColumns</a></li><li data-type='method' style='display: none;'><a href="module-db.html#.configTypes">configTypes</a></li><li data-type='method' style='display: none;'><a href="module-db.html#.convertError">convertError</a></li><li data-type='method' style='display: none;'><a href="module-db.html#.convertRows">convertRows</a></li><li data-type='method' style='display: none;'><a href="module-db.html#.copy">copy</a></li><li data-type='method' style='display: none;'><a href="module-db.html#.create">create</a></li><li data-type='method' style='display: none;'><a href="module-db.html#.createTables">createTables</a></li><li data-type='method' style='display: none;'><a href="module-db.html#.del">del</a></li><li data-type='method' style='display: none;'><a href="module-db.html#.delAll">delAll</a></li><li data-type='method' style='display: none;'><a href="module-db.html#.describeTables">describeTables</a></li><li data-type='method' style='display: none;'><a href="module-db.html#.drop">drop</a></li><li data-type='method' style='display: none;'><a href="module-db.html#.dropTables">dropTables</a></li><li data-type='method' style='display: none;'><a href="module-db.html#.get">get</a></li><li data-type='method' style='display: none;'><a href="module-db.html#.getCached">getCached</a></li><li data-type='method' style='display: none;'><a href="module-db.html#.getConfig">getConfig</a></li><li data-type='method' style='display: none;'><a href="module-db.html#.getPool">getPool</a></li><li data-type='method' style='display: none;'><a href="module-db.html#.getPoolTables">getPoolTables</a></li><li data-type='method' style='display: none;'><a href="module-db.html#.getPools">getPools</a></li><li data-type='method' style='display: none;'><a href="module-db.html#.getProcessRows">getProcessRows</a></li><li data-type='method' style='display: none;'><a href="module-db.html#.incr">incr</a></li><li data-type='method' style='display: none;'><a href="module-db.html#.init">init</a></li><li data-type='method' style='display: none;'><a href="module-db.html#.initColumns">initColumns</a></li><li data-type='method' style='display: none;'><a href="module-db.html#.initConfig">initConfig</a></li><li data-type='method' style='display: none;'><a href="module-db.html#.initTables">initTables</a></li><li data-type='method' style='display: none;'><a href="module-db.html#.join">join</a></li><li data-type='method' style='display: none;'><a href="module-db.html#.list">list</a></li><li data-type='method' style='display: none;'><a href="module-db.html#.prepare">prepare</a></li><li data-type='method' style='display: none;'><a href="module-db.html#.prepareColumn">prepareColumn</a></li><li data-type='method' style='display: none;'><a href="module-db.html#.prepareReq">prepareReq</a></li><li data-type='method' style='display: none;'><a href="module-db.html#.prepareRow">prepareRow</a></li><li data-type='method' style='display: none;'><a href="module-db.html#.put">put</a></li><li data-type='method' style='display: none;'><a href="module-db.html#.query">query</a></li><li data-type='method' style='display: none;'><a href="module-db.html#.queryProcessSync">queryProcessSync</a></li><li data-type='method' style='display: none;'><a href="module-db.html#.refreshColumns">refreshColumns</a></li><li data-type='method' style='display: none;'><a href="module-db.html#.runProcessRows">runProcessRows</a></li><li data-type='method' style='display: none;'><a href="module-db.html#.scan">scan</a></li><li data-type='method' style='display: none;'><a href="module-db.html#.search">search</a></li><li data-type='method' style='display: none;'><a href="module-db.html#.select">select</a></li><li data-type='method' style='display: none;'><a href="module-db.html#.setConfig">setConfig</a></li><li data-type='method' style='display: none;'><a href="module-db.html#.setProcessColumns">setProcessColumns</a></li><li data-type='method' style='display: none;'><a href="module-db.html#.setProcessRow">setProcessRow</a></li><li data-type='method' style='display: none;'><a href="module-db.html#.sql">sql</a></li><li data-type='method' style='display: none;'><a href="module-db.html#.sqlCacheColumns">sqlCacheColumns</a></li><li data-type='method' style='display: none;'><a href="module-db.html#.sqlColumn">sqlColumn</a></li><li data-type='method' style='display: none;'><a href="module-db.html#.sqlCreate">sqlCreate</a></li><li data-type='method' style='display: none;'><a href="module-db.html#.sqlDelete">sqlDelete</a></li><li data-type='method' style='display: none;'><a href="module-db.html#.sqlDrop">sqlDrop</a></li><li data-type='method' style='display: none;'><a href="module-db.html#.sqlExpr">sqlExpr</a></li><li data-type='method' style='display: none;'><a href="module-db.html#.sqlGet">sqlGet</a></li><li data-type='method' style='display: none;'><a href="module-db.html#.sqlInsert">sqlInsert</a></li><li data-type='method' style='display: none;'><a href="module-db.html#.sqlLimit">sqlLimit</a></li><li data-type='method' style='display: none;'><a href="module-db.html#.sqlPrepare">sqlPrepare</a></li><li data-type='method' style='display: none;'><a href="module-db.html#.sqlQuery">sqlQuery</a></li><li data-type='method' style='display: none;'><a href="module-db.html#.sqlQuote">sqlQuote</a></li><li data-type='method' style='display: none;'><a href="module-db.html#.sqlSelect">sqlSelect</a></li><li data-type='method' style='display: none;'><a href="module-db.html#.sqlTime">sqlTime</a></li><li data-type='method' style='display: none;'><a href="module-db.html#.sqlUpgrade">sqlUpgrade</a></li><li data-type='method' style='display: none;'><a href="module-db.html#.sqlUpgrade">sqlUpgrade</a></li><li data-type='method' style='display: none;'><a href="module-db.html#.sqlValue">sqlValue</a></li><li data-type='method' style='display: none;'><a href="module-db.html#.sqlValueIn">sqlValueIn</a></li><li data-type='method' style='display: none;'><a href="module-db.html#.sqlWhere">sqlWhere</a></li><li data-type='method' style='display: none;'><a href="module-db.html#.transaction">transaction</a></li><li data-type='method' style='display: none;'><a href="module-db.html#.update">update</a></li><li data-type='method' style='display: none;'><a href="module-db.html#.updateAll">updateAll</a></li><li data-type='method' style='display: none;'><a href="module-db.html#.upgrade">upgrade</a></li></ul><ul class='typedefs'><li data-type='typedef' style='display: none;'><a href="module-db.html#~DBColumn">DBColumn</a></li><li data-type='typedef' style='display: none;'><a href="module-db.html#~DBConfigOptions">DBConfigOptions</a></li><li data-type='typedef' style='display: none;'><a href="module-db.html#~DBRequest">DBRequest</a></li><li data-type='typedef' style='display: none;'><a href="module-db.html#~DBRequestOptions">DBRequestOptions</a></li><li data-type='typedef' style='display: none;'><a href="module-db.html#~DBResultCallback">DBResultCallback</a></li><li data-type='typedef' style='display: none;'><a href="module-db.html#~DBTable">DBTable</a></li></ul></li><li></li><li><a href="module-db_elasticsearch.html">db/elasticsearch</a><ul class='typedefs'></ul></li><li><a href="module-events.html">events</a><ul class='methods'><li data-type='method' style='display: none;'><a href="module-events.html#.putEvent">putEvent</a></li></ul><ul class='typedefs'></ul></li><li><a href="module-httpGet.html">httpGet</a><ul class='methods'><li data-type='method' style='display: none;'><a href="module-httpGet.html#.ahttpGet">ahttpGet</a></li><li data-type='method' style='display: none;'><a href="module-httpGet.html#~httpGet">httpGet</a></li></ul><ul class='typedefs'></ul></li><li><a href="module-ipc.html">ipc</a><ul class='typedefs'></ul></li><li><a href="module-jobs.html">jobs</a><ul class='methods'><li data-type='method' style='display: none;'><a href="module-jobs.html#.submitJob">submitJob</a></li></ul><ul class='typedefs'></ul></li><li><a href="module-lib.html">lib</a><ul class='methods'><li data-type='method' style='display: none;'><a href="module-lib.html#.configParse">configParse</a></li><li data-type='method' style='display: none;'><a href="module-lib.html#.jsonParse">jsonParse</a></li><li data-type='method' style='display: none;'><a href="module-lib.html#.toParams">toParams</a></li><li data-type='method' style='display: none;'><a href="module-lib.html#.xmlParse">xmlParse</a></li></ul><ul class='typedefs'><li data-type='typedef' style='display: none;'><a href="module-lib.html#.ParamsOptions">ParamsOptions</a></li></ul></li><li><a href="module-logger.html">logger</a><ul class='methods'><li data-type='method' style='display: none;'><a href="module-logger.html#.debug">debug</a></li><li data-type='method' style='display: none;'><a href="module-logger.html#.dev">dev</a></li><li data-type='method' style='display: none;'><a href="module-logger.html#.error">error</a></li><li data-type='method' style='display: none;'><a href="module-logger.html#.info">info</a></li><li data-type='method' style='display: none;'><a href="module-logger.html#.log">log</a></li><li data-type='method' style='display: none;'><a href="module-logger.html#.logger">logger</a></li><li data-type='method' style='display: none;'><a href="module-logger.html#.none">none</a></li><li data-type='method' style='display: none;'><a href="module-logger.html#.prefix">prefix</a></li><li data-type='method' style='display: none;'><a href="module-logger.html#.registerLevel">registerLevel</a></li><li data-type='method' style='display: none;'><a href="module-logger.html#.setDebugFilter">setDebugFilter</a></li><li data-type='method' style='display: none;'><a href="module-logger.html#.setFile">setFile</a></li><li data-type='method' style='display: none;'><a href="module-logger.html#.setLevel">setLevel</a></li><li data-type='method' style='display: none;'><a href="module-logger.html#.setOptions">setOptions</a></li><li data-type='method' style='display: none;'><a href="module-logger.html#.setSyslog">setSyslog</a></li><li data-type='method' style='display: none;'><a href="module-logger.html#.trace">trace</a></li><li data-type='method' style='display: none;'><a href="module-logger.html#.warn">warn</a></li></ul><ul class='typedefs'></ul></li><li><a href="module-logwatcher.html">logwatcher</a><ul class='typedefs'></ul></li><li><a href="module-metrics.html">metrics</a><ul class='methods'><li data-type='method' style='display: none;'><a href="module-metrics.html#.toJSON">toJSON</a></li></ul><ul class='typedefs'></ul></li><li><a href="module-modules.html">modules</a><ul class='typedefs'></ul></li><li><a href="module-push.html">push</a><ul class='typedefs'><li data-type='typedef' style='display: none;'><a href="module-push.html#~callback">callback</a></li></ul></li><li><a href="module-queue.html">queue</a><ul class='typedefs'></ul></li><li><a href="module-sendmail.html">sendmail</a><ul class='typedefs'></ul></li><li><a href="module-stats.html">stats</a><ul class='typedefs'></ul></li><li><a href="module-ws.html">ws</a><ul class='typedefs'></ul></li></ul><h3>Classes</h3><ul><li><a href="Counter.html">Counter</a><ul class='typedefs'></ul></li><li><a href="Pool.html">Pool</a><ul class='typedefs'></ul></li><li><a href="WebpushClient.html">WebpushClient</a><ul class='typedefs'></ul></li><li><a href="module-cache.CacheClient.html">CacheClient</a><ul class='methods'><li data-type='method' style='display: none;'><a href="module-cache.CacheClient.html#applyOptions">applyOptions</a></li><li data-type='method' style='display: none;'><a href="module-cache.CacheClient.html#clear">clear</a></li><li data-type='method' style='display: none;'><a href="module-cache.CacheClient.html#close">close</a></li><li data-type='method' style='display: none;'><a href="module-cache.CacheClient.html#del">del</a></li><li data-type='method' style='display: none;'><a href="module-cache.CacheClient.html#get">get</a></li><li data-type='method' style='display: none;'><a href="module-cache.CacheClient.html#incr">incr</a></li><li data-type='method' style='display: none;'><a href="module-cache.CacheClient.html#limiter">limiter</a></li><li data-type='method' style='display: none;'><a href="module-cache.CacheClient.html#lock">lock</a></li><li data-type='method' style='display: none;'><a href="module-cache.CacheClient.html#put">put</a></li><li data-type='method' style='display: none;'><a href="module-cache.CacheClient.html#stats">stats</a></li><li data-type='method' style='display: none;'><a href="module-cache.CacheClient.html#unlock">unlock</a></li></ul><ul class='typedefs'></ul></li><li><a href="module-cache.LocalClient.html">LocalClient</a><ul class='typedefs'></ul></li><li><a href="module-cache.RedisClient.html">RedisClient</a><ul class='typedefs'></ul></li><li><a href="module-cache.WorkerClient.html">WorkerClient</a><ul class='typedefs'></ul></li><li><a href="module-db.DBPool.html">DBPool</a><ul class='methods'><li data-type='method' style='display: none;'><a href="module-db.DBPool.html#bindValue">bindValue</a></li><li data-type='method' style='display: none;'><a href="module-db.DBPool.html#cacheColumns">cacheColumns</a></li><li data-type='method' style='display: none;'><a href="module-db.DBPool.html#cacheIndexes">cacheIndexes</a></li><li data-type='method' style='display: none;'><a href="module-db.DBPool.html#close">close</a></li><li data-type='method' style='display: none;'><a href="module-db.DBPool.html#configure">configure</a></li><li data-type='method' style='display: none;'><a href="module-db.DBPool.html#convertError">convertError</a></li><li data-type='method' style='display: none;'><a href="module-db.DBPool.html#exists">exists</a></li><li data-type='method' style='display: none;'><a href="module-db.DBPool.html#nextToken">nextToken</a></li><li data-type='method' style='display: none;'><a href="module-db.DBPool.html#open">open</a></li><li data-type='method' style='display: none;'><a href="module-db.DBPool.html#prepare">prepare</a></li><li data-type='method' style='display: none;'><a href="module-db.DBPool.html#prepareOptions">prepareOptions</a></li><li data-type='method' style='display: none;'><a href="module-db.DBPool.html#prepareRow">prepareRow</a></li><li data-type='method' style='display: none;'><a href="module-db.DBPool.html#query">query</a></li><li data-type='method' style='display: none;'><a href="module-db.DBPool.html#shutdown">shutdown</a></li></ul><ul class='typedefs'></ul></li><li><a href="module-db.SqlPool.html">SqlPool</a><ul class='typedefs'></ul></li><li><a href="module-db_elasticsearch.ElasticsearchPool.html">ElasticsearchPool</a><ul class='typedefs'></ul></li><li><a href="module-httpGet.httpGetRequest.html">httpGetRequest</a><ul class='methods'><li data-type='method' style='display: none;'><a href="module-httpGet.httpGetRequest.html#parseCookies">parseCookies</a></li><li data-type='method' style='display: none;'><a href="module-httpGet.httpGetRequest.html#toJSON">toJSON</a></li></ul><ul class='typedefs'></ul></li><li><a href="module-queue.EventBridgeClient.html">EventBridgeClient</a><ul class='typedefs'></ul></li><li><a href="module-queue.JSONClient.html">JSONClient</a><ul class='typedefs'></ul></li><li><a href="module-queue.LocalClient.html">LocalClient</a><ul class='typedefs'></ul></li><li><a href="module-queue.NatsClient.html">NatsClient</a><ul class='typedefs'></ul></li><li><a href="module-queue.QueueClient.html">QueueClient</a><ul class='methods'><li data-type='method' style='display: none;'><a href="module-queue.QueueClient.html#channel">channel</a></li><li data-type='method' style='display: none;'><a href="module-queue.QueueClient.html#monitor">monitor</a></li><li data-type='method' style='display: none;'><a href="module-queue.QueueClient.html#schedule">schedule</a></li></ul><ul class='typedefs'></ul></li><li><a href="module-queue.RedisClient.html">RedisClient</a><ul class='typedefs'></ul></li><li><a href="module-queue.SNSClient.html">SNSClient</a><ul class='typedefs'></ul></li><li><a href="module-queue.SQSClient.html">SQSClient</a><ul class='typedefs'></ul></li><li><a href="module-queue.WorkerClient.html">WorkerClient</a><ul class='typedefs'></ul></li></ul><h3>Global</h3><ul><li><a href="global.html#ExponentiallyMovingWeightedAverage">ExponentiallyMovingWeightedAverage</a></li><li><a href="global.html#Meter">Meter</a></li><li><a href="global.html#_skip32table">_skip32table</a></li><li><a href="global.html#lib">lib</a></li><li><a href="global.html#mod">mod</a></li><li><a href="global.html#net">net</a></li><li><a href="global.html#perf_hooks">perf_hooks</a></li><li><a href="global.html#runMethod">runMethod</a></li></ul>
    
</nav>

<div id="main">
    
    <h1 class="page-title">Tutorial: Getting Started</h1>
    

    <section>

<header>
    

    <h2>Getting Started</h2>
</header>

<article>
    <h1>Quick start</h1>
<ul>
<li>
<p>To start a bare-bone server</p>
<pre><code>  npm run watch
</code></pre>
<p>Now point your browser to http://localhost:8000/doc.html</p>
<p>The server is running with default configuration, while no custom code is loaded it still can serve internal API requests
described below and serve static assets from the web/ folder.</p>
</li>
<li>
<p>Programmatic way to start the server</p>
<pre><code>  $ node
  &gt; const { server, api } = require('backendjs')
  &gt; server.start({ api: 1 })
</code></pre>
</li>
<li>
<p>By default access is allowed only with valid session or signature, to see all public urls type in the node shell above:</p>
<pre><code>  &gt; api.allowPath
</code></pre>
<p>This property of the api module corresponds to the the <code>-api-allow-path</code> config parameter, see it in your browser
at <a href="http://localhost:8000/doc.html#module-api">docs</a>.</p>
</li>
<li>
<p>No database driver is enabled by default so here are examples to load local PostgreSQL, DynamoDB or ElasticSearch</p>
<pre><code>  bkjs run -api -db-pool sqlite -db-sqlite-pool
  bkjs run -api -db-pool pg -db-pg-pool
  bkjs run -api -db-pool dynamodb -db-dynamodb-pool
  bkjs run -api -db-pool elasticsearch -db-elasticsearch-pool
</code></pre>
</li>
<li>
<p>All command line parameters from the above can be saved in the <code>~.bkjs/etc/config.local</code> making pg the default database</p>
<pre><code>  db-pool=sqlite
  db-sqlite-pool=default
  db-pg-pool=default
  db-dynamdb-pool=default
  db-elasticsearch-pool=default
</code></pre>
</li>
<li>
<p>To start Node.js shell with backendjs loaded and initialized, all internal modules in shell are global for convenience</p>
<pre><code>  bkjs shell
</code></pre>
</li>
<li>
<p>Here is preview how the database can be accessed using internal DB methods with native Sqlite module:</p>
<pre><code>  bkjs shell -db-sqlite-pool -db-pool sqlite -db-create-tables

  &gt; db.select(&quot;bk_user&quot;, {}, lib.log);
  &gt; db.add(&quot;bk_user&quot;, { login: 'test2', name: 'Test2 name' }, lib.log);
  &gt; db.select(&quot;bk_user&quot;, { login: 'test2' }, lib.log);
  &gt; db.select(&quot;bk_user&quot;, { login: ['test1','test2'] }, { ops: { login: &quot;in&quot; } }, lib.log);
</code></pre>
</li>
</ul>
<p>or the same using async/await, same methods with <code>a</code> prepended to the name</p>
<pre><code>    &gt; await db.aselect(&quot;bk_user&quot;, {});
    &gt; await db.aadd(&quot;bk_user&quot;, { login: 'test2', name: 'Test2 name' });
    &gt; await db.aselect(&quot;bk_user&quot;, { login: 'test2' });
</code></pre>
<ul>
<li>
<p>To search using Elasticsearch full text capabilities</p>
<pre><code>  &gt; await db.aselect(&quot;bk_user&quot;, { q: 'test' }, { pool: &quot;elasticsearch&quot; });
</code></pre>
</li>
</ul>
<h2>To run an example</h2>
<ul>
<li>
<p>The library is packaged with copies of Bootstrap, jQuery, Knockout.js, Alpine.js for quick Web prototyping
in web/js and web/css directories, all scripts are available from the browser with /js or /css paths.</p>
</li>
<li>
<p>Go to <code>examples</code> directory, it has several apps with README.md explaining how to run each.</p>
</li>
<li>
<p>Go to an application directory and run:</p>
<pre><code>  ./app.sh
</code></pre>
</li>
<li>
<p>When the web server is started with <code>-watch</code> parameter or as <code>bkjs watch</code> then any change in the source files will make the server restart automatically
letting you focus on the source code and not server management, this mode is only enabled by default in development mode,
check <code>app.sh</code> for parameters before running it in production.</p>
</li>
</ul>
<h1>Dependencies</h1>
<p>Only core required dependencies are installed but there are many modules which require a module to work correctly.</p>
<p>All optional dependencies are listed in the package.json under &quot;optionalDependencies&quot; so npm cannot use it, only manual install of required modules is supported or
it is possible to install all optional dependencies for development purposes.</p>
<p>Here is the list of modules for each internal feature:</p>
<ul>
<li><code>pg</code> - PostgreSQL database access</li>
<li><code>redis</code> - for Redis queue and cache driver</li>
<li><code>unix-dgram</code> - for Linux to use local syslog via Unix domain</li>
<li><code>web-push</code> - for Web push notifications</li>
<li><code>sharp</code> - scaling images in uploads using VPS imaging</li>
<li><code>nats</code> - NATS driver for queue and events</li>
</ul>
<p>The command below will show all core and optional dependencies, <code>npm install</code> will install only the core dependencies</p>
<pre><code>npm install --include=optional
</code></pre>
<h1>Configuration</h1>
<p>Almost everything in the backend is configurable using config files or a config database.
The whole principle behind it is that once deployed in production, sometimes even quick restarts are impossible to do so
there should be a way to push config changes to the processes without restarting.</p>
<p>Every module defines a set of config parameters that defines the behavior of the code, due to the single threaded
nature of the Node.js. It is simple to update any config parameter to a new value so the code can operate differently.
To achieve this the code must be written in a special way, like driven by configuration which can be changed at
any time.</p>
<p>All configuration goes through the configuration process that checks all inputs and produces valid output which
is applied to the module variables. Config file or database table with configuration can be loaded on demand or
periodically, for example all local config files are watched for modification and reloaded automatically, the
config database is loaded periodically which is defined by another config parameter.</p>
<h1>Backend runtime</h1>
<p>When the backendjs server starts it spawns several processes that perform different tasks.</p>
<p>There are 2 major tasks of the backend that can be run at the same time or in any combination:</p>
<ul>
<li>a Web server (server) with Web workers (web)</li>
<li>a job scheduler (master)</li>
</ul>
<p>This is the typical output from the ps command on Linux server:</p>
<pre><code>ec2-user    899  0.0  0.6 1073844 52892 ?  Sl   14:33   0:01 bkjs: master
ec2-user    917  0.0  0.7 1072820 59008 ?  Sl   14:33   0:01 bkjs: web
ec2-user    919  0.0  0.7 1072820 60792 ?  Sl   14:33   0:02 bkjs: web
ec2-user    921  0.0  0.7 1072120 40721 ?  Sl   14:33   0:02 bkjs: worker
</code></pre>
<p>To enable any task a command line parameter must be provided, it cannot be specified in the config file. The <code>bkjs</code> utility supports several
commands that simplify running the backend in different modes.</p>
<ul>
<li><code>bkjs start</code> - this command is supposed to be run at the server startup as a service, it runs in the background and the monitors all tasks,
the env variable <code>BKJS_SERVER</code> must be set in the profile to <code>master</code> to start the server</li>
<li><code>bkjs watch</code> - runs the master and Web server in wather mode checking all source files for changes, this is the common command to be used
in development, it passes the command line switches: <code>-watch -master</code></li>
<li><code>bkjs master</code> - this command is supposed to be run at the server startup, it runs in the background and the monitors all processes,
the command line parameters are: <code>-daemon -master -syslog</code>, web server and workers are started by default</li>
<li><code>bkjs run</code> - this command runs without other parameters, all additional parameters can be added in the command line, this command
is a barebone helper to be used with any other custom settings.</li>
<li><code>bkjs run -api</code> - this command runs a single process as web server, sutable for Docker</li>
<li><code>bkjs run -worker</code> - this command runs a single process worker, suatable for Docker</li>
<li><code>bkjs shell</code> or <code>bksh</code> - start backendjs shell, no API or Web server is initialized, only the database pools</li>
</ul>
<h1>Backend directory structure</h1>
<p>When the backend server starts and no -home argument passed in the command line the backend uses the current directory.
It is also possible to set the default home using BKJS_HOME environment variable.</p>
<p>The backend directory structure is the following:</p>
<ul>
<li>
<p><code>etc</code> - configuration directory, all config files are there</p>
<ul>
<li>
<p><code>etc/bkjs.local</code> - shell script loaded by the bkjs utility to customize env variables</p>
</li>
<li>
<p><code>etc/config</code> - config parameters, same as specified in the command line but without leading -, each config parameter per line:</p>
<p>Example:</p>
<pre><code>  debug=1
  db-pool=dynamodb
  db-dynamodb-pool=http://localhost:9000
  db-pg-pool=postgresql://postgres@127.0.0.1/backend

  To specify other config file: bkjs shell -config-file file
</code></pre>
</li>
<li>
<p><code>etc/config.local</code> - same as the config but for the cases when local environment is different than the production or for dev specific parameters</p>
</li>
<li>
<p>on startup the following local config files will be loaded if present: <code>etc/config.runMode</code> and <code>etc/config.instance.tag</code>. These will be loaded after the main config but before config.local. The runMode is set to <code>dev</code> by default and can be changed with <code>-run-mode</code> config parameter, the instance tag is set with <code>-instance-tag</code> config parameter.</p>
</li>
<li>
<p>config files support sections that can be used for conditions, see <code>lib.configParse</code> description for details</p>
</li>
<li>
<p><code>etc/crontab</code> - jobs to be run with intervals, JSON file with a list of cron jobs objects:</p>
<p>Example:</p>
<ol>
<li>
<p>Create file in ~/.backend/etc/crontab with the following contents:</p>
<pre><code> [ { &quot;cron&quot;: &quot;0 1 1 * * 1,3&quot;, &quot;job&quot;: { &quot;app.cleanSessions&quot;: { &quot;interval&quot;: 3600000 } } } ]
</code></pre>
</li>
<li>
<p>Define the function that the cron will call with the options specified, callback must be called at the end, create this app.js file</p>
<pre><code> const { app, db } = require(&quot;backendjs&quot;);
 app.cleanSessions = function(options, callback) {
      db.delAll(&quot;session&quot;, { mtime: options.interval + Date.now() }, { ops: &quot;le&quot; }, callback);
 }
 server.start()
</code></pre>
</li>
<li>
<p>Start the jobs queue and the web server at once</p>
<pre><code> node app.js -master -jobs-workers 1 -jobs-cron
</code></pre>
</li>
</ol>
</li>
<li>
<p>etc/crontab.local - additional local crontab that is read after the main one, for local or dev environment</p>
</li>
</ul>
</li>
<li>
<p><code>modules</code> - loadable modules with specific functionality</p>
</li>
<li>
<p><code>var</code> - database files created by the server</p>
</li>
<li>
<p><code>tmp</code> - temporary files</p>
</li>
<li>
<p><code>web</code> - Web pages served by the static Express middleware</p>
</li>
</ul>
<h1>Environment variables</h1>
<p>On startup some env variable will be used for initial configuration:</p>
<ul>
<li>BKJS_HOME - home directory where to cd and find files, <code>-home</code> config parameter overrides it</li>
<li>BKJS_RUNMODE - initial run mode, <code>-run-mode</code> overrides it</li>
<li>BKJS_CONFIG - config file to use instead of 'etc/config', <code>-config</code> overrides it</li>
<li>BKJS_PACKAGES - packags to use, <code>-import-packages</code> overrieds it</li>
<li>BKJS_DB_POOL - default db pool, <code>-db-pool</code> overrides it</li>
<li>BKJS_DB_CONFIG - config db pool, <code>-db-config</code> overrides it</li>
<li>BKJS_ROLES - additonal roles to use for config, <code>-roles</code> overrides it</li>
<li>BKJS_APP_NAME - default app name</li>
<li>BKJS_APP_PACKAGE - default app package from preloaded packages</li>
<li>BKJS_TAG - initial instance tag, <code>-instance-tag</code> overrides it, it may be also overridden by AWS instance tag</li>
<li>BKJS_LOG_OPTIONS - logger options, <code>-log-options</code> overrides it</li>
<li>BKJS_PORT - port for web server</li>
<li>BKJS_WSPORT - port for web sockets</li>
</ul>
</article>

</section>

    
    
</div>

<br class="clear">

<footer>
    Documentation generated by <a href="https://github.com/jsdoc3/jsdoc">JSDoc 4.0.5</a> using the <a href="https://github.com/clenemt/docdash">docdash</a> theme.
</footer>

<script>prettyPrint();</script>
<script src="scripts/polyfill.js"></script>
<script src="scripts/linenumber.js"></script>

<script src="scripts/search.js" defer></script>


<script src="scripts/collapse.js" defer></script>


</body>
</html>