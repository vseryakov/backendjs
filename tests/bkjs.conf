
api-port=8999
#api-ws-port=8999

app-no-restart=1
app-no-events=1

jobs-workers=1

app-path-views=tests
app-path-web=tests

api-static-views-^/render.html = render

api-redirect-login-^/app = /login.html?path=@PATH@
api-redirect-url = { "^/redirect.html": "http://127.0.0.1/@BASE@?@QUERY@" }

api-routing-auth-^/render = /render.html
api-routing-path-^/old/endpoint = /render.html

[roles=users]
api-acl-authenticated=auth
api-acl-add-auth=^/(auth|render)$
api-users-users={ "test": { "id": "test", "name": "test", "login": "test", "secret": "test" } }

[roles=csrf-token]
api-csrf-check-path=^/login$
api-csrf-set-path=^/auth$
api-csrf-pub-path=^/ping$

[roles=csrf-origin]
api-csrf-origin-http://127.0.0.1:8999 = /^(login|auth)
api-csrf-sec-fetch-cross-site = ^/auth$

[roles=redis]
cache-redis=redis://
queue-redis=redis://?bk-visibilityTimeout=5000&bk-interval=50&bk-retryInterval=50
ipc-system-queue=redis
jobs-worker-queue=redis

[roles=sqlite]
db-pool=sqlite
db-config=sqlite
db-sqlite-pool=/tmp/test

[roles=dynamodb]
db-pool=dynamodb
db-config=dynamodb
db-dynamodb-pool=http://localhost:8181

[roles=elasticsearch]
db-pool=elasticsearch
db-config=elasticsearch
db-elasticsearch-pool=default
db-elasticsearch-pool-tables=test1,test2,test3
db-elasticsearch-pool-options-defaultParams={"refresh":true}

[global]
